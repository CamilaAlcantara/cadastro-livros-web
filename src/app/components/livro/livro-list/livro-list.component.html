<div class="card shadow-sm border-0">
  <div class="card-header text-white d-flex justify-content-between align-items-center" 
       style="background-color: #2C4C7E;">
    <h5 class="mb-0">
      <i class="bi bi-journal-bookmark-fill me-2"></i>Catálogo de Livros
    </h5>
    <div class="d-flex gap-2">
        <button class="btn btn-light btn-sm fw-bold" 
                style="color: #2C4C7E;" 
                (click)="imprimirRelatorio()">
            <i class="bi bi-file-pdf me-1"></i> Gerar Relatório
        </button>
        
        <button class="btn btn-light btn-sm fw-bold" 
                style="color: #2C4C7E;" 
                (click)="novoLivro()">
            <i class="bi bi-plus-lg me-1"></i> Novo Livro
        </button>
    </div>
  </div>

  <div class="card-body p-0">
    <div class="table-responsive">
      <table class="table table-hover align-middle mb-0">
        <thead class="table-light">
          <tr>
            <th class="ps-4">Título</th>
            <th>Editora</th>
            <th class="text-center">Ano</th>
            <th>Autores</th>
            <th>Assuntos</th>
            <th class="text-center" style="width: 15%;">Ações</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let item of livros">
            <td class="ps-4 fw-bold" style="color: #2C4C7E;">{{ item.titulo }}</td>
            <td>{{ item.editora }} ({{ item.edicao }}ª ed.)</td>
            <td class="text-center">{{ item.anoPublicacao }}</td>
            
            <td>
              <span *ngFor="let autor of item.autores" class="badge bg-secondary me-1">
                {{ autor.nome }}
              </span>
            </td>

            <td>
              <span *ngFor="let assunto of item.assuntos" class="badge me-1" style="background-color: #C6E2FF; color: #2C4C7E;">
                {{ assunto.descricao }}
              </span>
            </td>

            <td class="text-center">
              <button class="btn btn-sm btn-outline-primary me-2 border-0" (click)="editar(item)">
                <i class="bi bi-pencil-square"></i>
              </button>
              <button class="btn btn-sm btn-outline-danger border-0" (click)="prepararExclusao(item)">
                <i class="bi bi-trash-fill"></i>
              </button>
            </td>
          </tr>
          
          <tr *ngIf="livros.length === 0">
            <td colspan="6" class="text-center py-5 text-muted">
              <i class="bi bi-inbox fs-2 d-block mb-2"></i>
              Nenhum livro cadastrado.
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>

<div class="modal fade" id="modalLivro" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-lg"> 
    <div class="modal-content">
      <div class="modal-header text-white" style="background-color: #2C4C7E;">
        <h5 class="modal-title">
          <i class="bi" [ngClass]="livroSelecionado ? 'bi-pencil-square' : 'bi-plus-circle'"></i>
          {{ livroSelecionado ? 'Editar Detalhes do Livro' : 'Cadastrar Novo Livro' }}
        </h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <app-livro-form 
          [livroParaEditar]="livroSelecionado" 
          (aoSalvar)="fecharModalERecarregar()">
        </app-livro-form>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="modalConfirmacaoLivro" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content border-0">
      <div class="modal-header bg-danger text-white">
        <h5 class="modal-title"><i class="bi bi-exclamation-triangle me-2"></i>Confirmar Exclusão</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <p>Excluir permanentemente: <strong>{{ livroParaExcluir?.titulo }}</strong>?</p>
      </div>
      <div class="modal-footer border-0">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
        <button type="button" class="btn btn-danger" (click)="confirmarExclusao()">Excluir</button>
      </div>
    </div>
  </div>
</div>

<div *ngIf="alerta.mensagem" 
     class="alert d-flex align-items-center fade show shadow-sm mt-4" 
     [ngClass]="'alert-' + alerta.tipo" 
     role="alert">
  <i class="bi me-2" [ngClass]="alerta.tipo === 'success' ? 'bi-check-circle-fill' : 'bi-exclamation-triangle-fill'"></i>
  <div>{{ alerta.mensagem }}</div>
</div>